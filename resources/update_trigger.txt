-- update trigger 생성
-- drop trigger if exists coffee_project.tri_product_after_update_cofeeReport;

create trigger coffee_project.tri_product_after_update_cofeeReport
after update
on coffee_project.product
for each row
begin
	update coffee_project.coffeeReport 
	set priceSum = new.price*new.sale,
		surtax = ceiling(new.price/11),
		supply = new.price-ceiling(new.price/11),
		marginPrice = round(new.margin*(new.price-(new.price/11)))
	where proCode = new.proCode;
end ;